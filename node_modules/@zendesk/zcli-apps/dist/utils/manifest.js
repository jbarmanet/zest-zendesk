"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateManifestFile = exports.getManifestFile = void 0;
const fileUtils_1 = require("./fileUtils");
const path = require("path");
const fs = require("fs");
const chalk = require("chalk");
const errors_1 = require("@oclif/core/lib/errors");
const getManifestFile = (appPath) => {
    const manifestFilePath = path.join(appPath, 'manifest.json');
    (0, fileUtils_1.validatePath)(manifestFilePath);
    const manifest = fs.readFileSync(manifestFilePath, 'utf8');
    return JSON.parse(manifest);
};
exports.getManifestFile = getManifestFile;
const updateManifestFile = (appPath, manifestContent) => {
    const manifestFilePath = path.join(appPath, 'manifest.json');
    (0, fileUtils_1.validatePath)(manifestFilePath);
    try {
        fs.writeFileSync(manifestFilePath, JSON.stringify(manifestContent, null, 2));
    }
    catch (error) {
        throw new errors_1.CLIError(chalk.red(`Failed to update Manifest file at path: ${manifestFilePath}. ${error}`));
    }
};
exports.updateManifestFile = updateManifestFile;
