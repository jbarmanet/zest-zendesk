"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@oclif/core");
const fileUtils_1 = require("../../utils/fileUtils");
const path = require("path");
const chalk = require("chalk");
const appPath_1 = require("../../lib/appPath");
class Clean extends core_1.Command {
    async run() {
        const tmpDirectoryPath = path.join(process.cwd(), 'tmp');
        const { args } = await this.parse(Clean);
        const appPath = args.appPath || './';
        (0, appPath_1.validateAppPath)(appPath);
        try {
            await (0, fileUtils_1.cleanDirectory)(tmpDirectoryPath);
            this.log(chalk.green(`Successfully removed ${tmpDirectoryPath} directory.`));
        }
        catch (error) {
            this.error(chalk.red(`Failed to remove ${tmpDirectoryPath} directory.`));
        }
    }
}
exports.default = Clean;
Clean.description = 'purges any app artifacts which have been generated locally';
Clean.args = [
    { name: 'appPath' }
];
Clean.examples = [
    '$ zcli apps:clean ./app'
];
