"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("@oclif/core");
const path = require("path");
const chalk = require("chalk");
const package_1 = require("../../lib/package");
const appPath_1 = require("../../lib/appPath");
class Package extends core_1.Command {
    async run() {
        const { args } = await this.parse(Package);
        const { appDirectory } = args;
        (0, appPath_1.validateAppPath)(appDirectory);
        const appPath = path.resolve(appDirectory);
        const pkgPath = await (0, package_1.createAppPkg)(appPath);
        try {
            await (0, package_1.validatePkg)(pkgPath);
            this.log(chalk.green(`Package created at ${path.relative(process.cwd(), pkgPath)}`));
        }
        catch (error) {
            this.error(chalk.red(error));
        }
    }
}
exports.default = Package;
Package.description = 'validates and packages your app';
Package.args = [
    { name: 'appDirectory', default: '.', required: true, description: 'app path where manifest.json exists' }
];
Package.examples = [
    '$ zcli apps:package .',
    '$ zcli apps:package ./app1'
];
